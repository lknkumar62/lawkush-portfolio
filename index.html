<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lawkush Kumar | Creative Developer</title>
    
    <!-- Razorpay -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00f3ff;
            --secondary: #ff00ff;
            --accent: #00ff88;
            --gold: #ffd700;
            --dark: #050505;
            --darker: #020202;
            --card: rgba(255, 255, 255, 0.03);
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--dark);
            color: white;
            overflow-x: hidden;
            cursor: none;
        }

        /* Custom Cursor */
        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.1s;
            mix-blend-mode: difference;
        }

        .cursor-follower {
            width: 40px;
            height: 40px;
            background: rgba(0, 243, 255, 0.1);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9998;
            transition: transform 0.3s ease;
        }

        /* Background Animation */
        .bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: rgba(5, 5, 5, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            font-family: 'Syncopate', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            gap: 40px;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-weight: 500;
            position: relative;
            transition: all 0.3s;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s;
            box-shadow: 0 0 10px var(--primary);
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a:hover::before {
            width: 100%;
        }

        .auth-section {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: black;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.5);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .user-info {
            display: none;
            align-items: center;
            gap: 15px;
        }

        .user-info.active {
            display: flex;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 3px solid var(--primary);
            cursor: pointer;
            transition: all 0.3s;
            object-fit: cover;
        }

        .user-avatar:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 0 30px var(--primary);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 120px 5% 80px;
            position: relative;
            overflow: hidden;
        }

        .hero-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            align-items: center;
            max-width: 1400px;
            width: 100%;
        }

        .hero-content {
            z-index: 2;
        }

        .hero-content h1 {
            font-family: 'Syncopate', sans-serif;
            font-size: 4rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .hero-content h1 .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(100px);
        }

        .hero-content .tagline {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 30px;
            min-height: 60px;
        }

        .hero-content .tagline .typing {
            color: var(--primary);
            border-right: 3px solid var(--primary);
            animation: blink 0.7s infinite;
        }

        @keyframes blink {
            50% { border-color: transparent; }
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
        }

        /* 3D Profile Card */
        .profile-3d {
            perspective: 1000px;
            width: 400px;
            height: 500px;
        }

        .profile-card-3d {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .profile-card-3d:hover {
            transform: rotateY(10deg) rotateX(5deg);
        }

        .profile-front {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 
                0 0 60px rgba(0, 243, 255, 0.3),
                inset 0 0 60px rgba(0, 243, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .profile-front::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.2), rgba(255, 0, 255, 0.2));
            z-index: 1;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .profile-card-3d:hover .profile-front::before {
            opacity: 1;
        }

        .profile-front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .edit-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            transform: translateY(100%);
            transition: transform 0.3s;
            z-index: 2;
        }

        .profile-card-3d:hover .edit-overlay {
            transform: translateY(0);
        }

        /* Floating Elements */
        .floating-icon {
            position: absolute;
            font-size: 2rem;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(10deg); }
        }

        /* Sections */
        section {
            padding: 100px 5%;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .section-header {
            text-align: center;
            margin-bottom: 80px;
        }

        .section-header h2 {
            font-family: 'Syncopate', sans-serif;
            font-size: 3rem;
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
        }

        .section-header h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        /* Glass Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .glass-card:hover::before {
            opacity: 1;
        }

        .glass-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0, 243, 255, 0.2);
        }

        /* Social Grid */
        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .social-card {
            composes: glass-card;
            text-align: center;
            cursor: pointer;
        }

        .social-icon-wrapper {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            position: relative;
        }

        .social-icon-wrapper::before {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .social-card:hover .social-icon-wrapper::before {
            opacity: 1;
        }

        /* Products */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .product-card {
            composes: glass-card;
            padding: 0;
            overflow: hidden;
        }

        .product-image-wrapper {
            position: relative;
            height: 250px;
            overflow: hidden;
        }

        .product-image-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .product-card:hover .product-image-wrapper img {
            transform: scale(1.1);
        }

        .product-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--secondary);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .product-info {
            padding: 30px;
        }

        .product-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin: 15px 0;
        }

        /* Blogs */
        .blogs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
        }

        .blog-card {
            composes: glass-card;
            cursor: pointer;
        }

        .blog-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            display: flex;
            animation: modalIn 0.3s;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-content {
            background: linear-gradient(145deg, #0a0a0a, #050505);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 0 60px rgba(0, 243, 255, 0.2);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(255, 0, 0, 0.3);
            transform: rotate(90deg);
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker);
            z-index: 3000;
            overflow-y: auto;
        }

        .admin-panel.active {
            display: block;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .admin-header {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .admin-nav {
            display: flex;
            gap: 10px;
            padding: 20px 5%;
            background: rgba(255, 255, 255, 0.02);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            overflow-x: auto;
        }

        .admin-nav button {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .admin-nav button.active,
        .admin-nav button:hover {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
            transform: translateY(-2px);
        }

        .admin-content {
            padding: 40px 5%;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
        }

        .image-upload {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .image-upload:hover {
            border-color: var(--primary);
            background: rgba(0, 243, 255, 0.05);
        }

        .image-upload input {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
        }

        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .preview-image.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        /* Items List */
        .items-list {
            list-style: none;
        }

        .items-list li {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }

        .items-list li:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(10px);
            border-color: var(--primary);
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 100px;
            right: 30px;
            padding: 20px 30px;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            color: black;
            border-radius: 15px;
            font-weight: 600;
            transform: translateX(500px);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 5000;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
            max-width: 400px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: linear-gradient(135deg, #ff4444, #ff8800);
            color: white;
        }

        /* Loading */
        .loading-screen {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--darker);
            z-index: 6000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 30px;
        }

        .loading-screen.active {
            display: flex;
        }

        .loader {
            width: 80px;
            height: 80px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 968px) {
            .hero-container {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .profile-3d {
                width: 300px;
                height: 400px;
                margin: 0 auto;
            }

            .nav-links {
                display: none;
            }
        }

        /* Particle Effect */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--primary);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <!-- Background Canvas -->
    <canvas class="bg-canvas" id="bgCanvas"></canvas>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <p style="color: var(--primary); font-size: 1.2rem;">Loading...</p>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="logo">LAWKUSH</div>
        <div class="nav-links">
            <a href="#home">Home</a>
            <a href="#social">Social</a>
            <a href="#products">Products</a>
            <a href="#blogs">Blogs</a>
        </div>
        <div class="auth-section">
            <div id="authButtons">
                <button class="btn btn-outline" onclick="openAuth('login')">Login</button>
                <button class="btn btn-primary" onclick="openAuth('signup')">Sign Up</button>
            </div>
            <div class="user-info" id="userInfo">
                <span id="userName"></span>
                <img src="" alt="User" class="user-avatar" id="userAvatar" onclick="toggleAdmin()">
                <button class="btn btn-outline" onclick="logout()" style="padding: 10px 20px; font-size: 0.8rem;">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="floating-icon" style="top: 20%; left: 10%;"><i class="fas fa-code"></i></div>
        <div class="floating-icon" style="top: 60%; right: 10%; animation-delay: 2s;"><i class="fas fa-rocket"></i></div>
        <div class="floating-icon" style="bottom: 20%; left: 20%; animation-delay: 4s;"><i class="fas fa-star"></i></div>

        <div class="hero-container">
            <div class="hero-content">
                <h1 id="heroTitle">Lawkush Kumar</h1>
                <div class="tagline">
                    <span id="typingText"></span><span class="typing">|</span>
                </div>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="scrollToSection('products')">Explore Products</button>
                    <button class="btn btn-outline" onclick="scrollToSection('social')">Connect</button>
                </div>
            </div>

            <div class="profile-3d" id="profile3d">
                <div class="profile-card-3d">
                    <div class="profile-front">
                        <img src="" alt="Lawkush Kumar" id="heroImage">
                        <div class="edit-overlay">
                            <button class="btn btn-primary" style="width: 100%;" onclick="openProfileEdit()">
                                <i class="fas fa-camera"></i> Change Photo
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Social Section -->
    <section id="social">
        <div class="section-header">
            <h2>Connect</h2>
            <p>Follow my journey across the digital universe</p>
        </div>
        <div class="social-grid" id="socialGrid"></div>
    </section>

    <!-- Products Section -->
    <section id="products">
        <div class="section-header">
            <h2>Products</h2>
            <p>Premium digital assets crafted with precision</p>
        </div>
        <div class="products-grid" id="productsGrid"></div>
    </section>

    <!-- Blogs Section -->
    <section id="blogs">
        <div class="section-header">
            <h2>Blogs</h2>
            <p>Thoughts, tutorials, and insights</p>
        </div>
        <div class="blogs-grid" id="blogsGrid"></div>
    </section>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('authModal')"><i class="fas fa-times"></i></button>
            <h2 style="font-family: 'Syncopate', sans-serif; margin-bottom: 30px; text-align: center;" id="authTitle">Login</h2>
            <form id="authForm" onsubmit="handleAuth(event)">
                <div id="nameGroup" style="display: none;">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Full Name</label>
                        <input type="text" id="authName" placeholder="John Doe">
                    </div>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="authEmail" placeholder="you@example.com" required>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="authPassword" placeholder="••••••••" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;" id="authSubmitBtn">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </form>
            <div style="text-align: center; margin: 25px 0; position: relative;">
                <span style="background: #0a0a0a; padding: 0 15px; color: rgba(255,255,255,0.5);">or continue with</span>
                <div style="position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: rgba(255,255,255,0.1); z-index: -1;"></div>
            </div>
            <button class="btn btn-outline" style="width: 100%;" onclick="googleAuth()">
                <i class="fab fa-google"></i> Google
            </button>
            <p style="text-align: center; margin-top: 25px; color: rgba(255,255,255,0.6);">
                <span id="authSwitchText">Don't have an account?</span>
                <a href="#" onclick="toggleAuthMode()" style="color: var(--primary); text-decoration: none; font-weight: 600; margin-left: 5px;" id="authSwitchLink">Create one</a>
            </p>
        </div>
    </div>

    <!-- Profile Edit Modal -->
    <div class="modal" id="profileEditModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('profileEditModal')"><i class="fas fa-times"></i></button>
            <h2 style="font-family: 'Syncopate', sans-serif; margin-bottom: 30px;">Edit Profile</h2>
            <div class="image-upload" id="imageUploadArea">
                <input type="file" id="profileImageInput" accept="image/*" onchange="handleImageSelect(event)">
                <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                <p>Click or drag image here</p>
                <img id="profilePreview" class="preview-image">
            </div>
            <div class="form-group" style="margin-top: 25px;">
                <label>Name</label>
                <input type="text" id="editProfileName" placeholder="Your Name">
            </div>
            <div class="form-group">
                <label>Tagline</label>
                <input type="text" id="editProfileTagline" placeholder="Your Tagline">
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="saveProfileChanges()">
                <i class="fas fa-save"></i> Save Changes
            </button>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <div style="font-family: 'Syncopate', sans-serif; font-size: 1.5rem; background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                <i class="fas fa-crown"></i> Admin Dashboard
            </div>
            <button class="btn btn-outline" onclick="closeAdmin()">
                <i class="fas fa-times"></i> Close
            </button>
        </div>
        <div class="admin-nav">
            <button class="active" onclick="showAdminTab('profile', this)"><i class="fas fa-user"></i> Profile</button>
            <button onclick="showAdminTab('social', this)"><i class="fas fa-share-alt"></i> Social</button>
            <button onclick="showAdminTab('products', this)"><i class="fas fa-shopping-bag"></i> Products</button>
            <button onclick="showAdminTab('blogs', this)"><i class="fas fa-blog"></i> Blogs</button>
        </div>
        <div class="admin-content">
            <!-- Profile Tab -->
            <div class="admin-section active" id="admin-profile">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px;">
                    <div class="glass-card">
                        <h3 style="margin-bottom: 25px; color: var(--primary);"><i class="fas fa-image"></i> Profile Image</h3>
                        <div class="image-upload" onclick="document.getElementById('adminProfileInput').click()">
                            <input type="file" id="adminProfileInput" accept="image/*" style="display: none;" onchange="previewAdminImage(this)">
                            <i class="fas fa-camera" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 10px;"></i>
                            <p>Click to upload new image</p>
                            <img id="adminProfilePreview" class="preview-image">
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="updateAdminProfileImage()">
                            <i class="fas fa-upload"></i> Update Image
                        </button>
                    </div>
                    <div class="glass-card">
                        <h3 style="margin-bottom: 25px; color: var(--primary);"><i class="fas fa-info-circle"></i> Profile Info</h3>
                        <div class="form-group">
                            <label>Display Name</label>
                            <input type="text" id="adminProfileName" placeholder="Your Name">
                        </div>
                        <div class="form-group">
                            <label>Tagline</label>
                            <input type="text" id="adminProfileTagline" placeholder="Creative Developer...">
                        </div>
                        <button class="btn btn-primary" style="width: 100%;" onclick="updateAdminProfileInfo()">
                            <i class="fas fa-save"></i> Save Info
                        </button>
                    </div>
                </div>
            </div>

            <!-- Social Tab -->
            <div class="admin-section" id="admin-social">
                <div class="glass-card">
                    <h3 style="margin-bottom: 25px; color: var(--primary);"><i class="fas fa-share-alt"></i> Social Media Links</h3>
                    <ul class="items-list" id="adminSocialList"></ul>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="openAddEditModal('social')">
                        <i class="fas fa-plus"></i> Add New Link
                    </button>
                </div>
            </div>

            <!-- Products Tab -->
            <div class="admin-section" id="admin-products">
                <div class="glass-card">
                    <h3 style="margin-bottom: 25px; color: var(--primary);"><i class="fas fa-shopping-bag"></i> Products</h3>
                    <ul class="items-list" id="adminProductList"></ul>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="openAddEditModal('product')">
                        <i class="fas fa-plus"></i> Add New Product
                    </button>
                </div>
            </div>

            <!-- Blogs Tab -->
            <div class="admin-section" id="admin-blogs">
                <div class="glass-card">
                    <h3 style="margin-bottom: 25px; color: var(--primary);"><i class="fas fa-blog"></i> Blog Posts</h3>
                    <ul class="items-list" id="adminBlogList"></ul>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="openAddEditModal('blog')">
                        <i class="fas fa-plus"></i> Add New Blog
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div class="modal" id="addEditModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('addEditModal')"><i class="fas fa-times"></i></button>
            <h2 style="font-family: 'Syncopate', sans-serif; margin-bottom: 30px;" id="addEditTitle">Add New</h2>
            <form id="addEditForm" onsubmit="saveAddEdit(event)">
                <div id="addEditFields"></div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                    <i class="fas fa-save"></i> Save
                </button>
            </form>
        </div>
    </div>

    <!-- Payment Success Modal -->
    <div class="modal" id="paymentSuccessModal">
        <div class="modal-content" style="text-align: center;">
            <button class="modal-close" onclick="closeModal('paymentSuccessModal')"><i class="fas fa-times"></i></button>
            <div style="font-size: 5rem; color: var(--accent); margin-bottom: 20px;">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 style="font-family: 'Syncopate', sans-serif; margin-bottom: 15px;">Payment Successful!</h2>
            <p style="color: rgba(255,255,255,0.7); margin-bottom: 25px;">Thank you for your purchase. Your product is ready.</p>
            <div id="paymentDetails" style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; margin-bottom: 25px; text-align: left;"></div>
            <button class="btn btn-primary" style="width: 100%;" onclick="downloadProduct()">
                <i class="fas fa-download"></i> Download Product
            </button>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // Your profile image as base64 (placeholder - replace with actual)
        const YOUR_PROFILE_IMAGE = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD...";

        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyBgjSRBDfaL0FAb7_Tjb3vKpBw1qqevDyw",
            authDomain: "lawkush-portfolio.firebaseapp.com",
            projectId: "lawkush-portfolio",
            storageBucket: "lawkush-portfolio.firebasestorage.app",
            messagingSenderId: "682826833656",
            appId: "1:682826833656:web:c500f3637e88cf0e89e50d"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();

        const ADMIN_EMAIL = "lawkusd660@gmail.com";
        
        let currentUser = null;
        let isAdmin = false;
        let authMode = 'login';
        let currentEditType = null;
        let currentEditId = null;
        let tempImageFile = null;
        let currentProduct = null;

        // Default Data with your image
        const defaultData = {
            profile: {
                name: "Lawkush Kumar",
                tagline: "Creative Developer & Digital Creator",
                image: YOUR_PROFILE_IMAGE
            },
            social: [
                { id: "1", name: "Instagram", platform: "instagram", url: "https://instagram.com/lawkush", icon: "fab fa-instagram", color: "#E1306C" },
                { id: "2", name: "Twitter", platform: "twitter", url: "https://twitter.com/lawkush", icon: "fab fa-twitter", color: "#1DA1F2" },
                { id: "3", name: "LinkedIn", platform: "linkedin", url: "https://linkedin.com/in/lawkush", icon: "fab fa-linkedin", color: "#0077B5" },
                { id: "4", name: "GitHub", platform: "github", url: "https://github.com/lnkkumar62", icon: "fab fa-github", color: "#6e5494" }
            ],
            products: [
                { 
                    id: "1", 
                    title: "Complete Web Development Course", 
                    description: "Master HTML, CSS, JavaScript, React, Node.js and more. Includes 50+ hours of video content, projects, and certificate.", 
                    price: 1999, 
                    image: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=600",
                    downloadLink: "https://example.com/download/web-dev-course",
                    fileType: "Video Course + PDF"
                },
                { 
                    id: "2", 
                    title: "Digital Marketing Mastery", 
                    description: "Learn SEO, Social Media Marketing, Google Ads, Analytics. Grow any business with proven strategies.", 
                    price: 1499, 
                    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600",
                    downloadLink: "https://example.com/download/digital-marketing",
                    fileType: "E-Book + Videos"
                },
                { 
                    id: "3", 
                    title: "UI/UX Design Pro Bundle", 
                    description: "Figma mastery, design systems, prototyping, and portfolio building. Become a professional designer.", 
                    price: 2499, 
                    image: "https://images.unsplash.com/photo-1561070791-2526d30994b5?w=600",
                    downloadLink: "https://example.com/download/ui-ux-bundle",
                    fileType: "Design Files + Course"
                }
            ],
            blogs: [
                { 
                    id: "1", 
                    title: "How to Learn Web Development in 2024", 
                    excerpt: "Complete roadmap from zero to hero. Best resources, timeline, and tips for beginners.", 
                    content: "Full article content here...",
                    date: "2024-02-10",
                    readTime: "5 min read"
                },
                { 
                    id: "2", 
                    title: "Digital Marketing Strategies That Actually Work", 
                    excerpt: "Proven techniques to grow your online presence and generate leads consistently.", 
                    content: "Full article content here...",
                    date: "2024-02-05",
                    readTime: "8 min read"
                },
                { 
                    id: "3", 
                    title: "Building a Personal Brand as a Developer", 
                    excerpt: "Why personal branding matters and how to build yours from scratch.", 
                    content: "Full article content here...",
                    date: "2024-01-28",
                    readTime: "6 min read"
                }
            ]
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initAnimations();
            initCursor();
            initBackground();
            
            auth.onAuthStateChanged(user => {
                currentUser = user;
                isAdmin = user && user.email === ADMIN_EMAIL;
                updateUI();
                if (user) loadData();
            });

            // Initial load
            loadData();
        });

        // Load Data
        async function loadData() {
            showLoading(true);
            try {
                const doc = await db.collection('site').doc('data').get();
                const data = doc.exists ? doc.data() : defaultData;
                if (!doc.exists) await db.collection('site').doc('data').set(defaultData);
                renderAll(data);
            } catch (e) {
                console.error("Error:", e);
                renderAll(defaultData);
            }
            showLoading(false);
        }

        // Render All
        function renderAll(data) {
            // Profile
            const profileImg = document.getElementById('heroImage');
            profileImg.src = data.profile.image;
            document.getElementById('heroTitle').textContent = data.profile.name;
            
            // Typing animation for tagline
            typeWriter(data.profile.tagline, 'typingText');
            
            // Fill edit fields
            document.getElementById('editProfileName').value = data.profile.name;
            document.getElementById('editProfileTagline').value = data.profile.tagline;
            document.getElementById('adminProfileName').value = data.profile.name;
            document.getElementById('adminProfileTagline').value = data.profile.tagline;

            // Social
            document.getElementById('socialGrid').innerHTML = data.social.map((s, i) => `
                <div class="social-card" onclick="window.open('${s.url}', '_blank')" style="animation-delay: ${i * 0.1}s">
                    <div class="social-icon-wrapper">
                        <i class="${s.icon}"></i>
                    </div>
                    <h3>${s.name}</h3>
                    <p style="color: rgba(255,255,255,0.5); font-size: 0.9rem;">${s.url.replace('https://', '')}</p>
                </div>
            `).join('');

            // Products
            document.getElementById('productsGrid').innerHTML = data.products.map((p, i) => `
                <div class="product-card" style="animation-delay: ${i * 0.1}s">
                    <div class="product-image-wrapper">
                        <img src="${p.image}" alt="${p.title}" onerror="this.src='https://via.placeholder.com/600x400/1a1a2e/fff?text=${encodeURIComponent(p.title)}'">
                        <span class="product-badge">Bestseller</span>
                    </div>
                    <div class="product-info">
                        <h3>${p.title}</h3>
                        <p style="color: rgba(255,255,255,0.6); margin: 10px 0; line-height: 1.6;">${p.description}</p>
                        <div class="product-price">₹${p.price.toLocaleString()}</div>
                        <button class="btn btn-primary" style="width: 100%;" onclick="initiatePayment('${p.id}')">
                            <i class="fas fa-shopping-cart"></i> Buy Now
                        </button>
                    </div>
                </div>
            `).join('');

            // Blogs
            document.getElementById('blogsGrid').innerHTML = data.blogs.map((b, i) => `
                <div class="blog-card" onclick="openBlogDetail('${b.id}')" style="animation-delay: ${i * 0.1}s">
                    <div class="blog-meta">
                        <span><i class="far fa-calendar"></i> ${new Date(b.date).toLocaleDateString()}</span>
                        <span><i class="far fa-clock"></i> ${b.readTime}</span>
                    </div>
                    <h3 style="font-size: 1.3rem; margin-bottom: 15px; line-height: 1.4;">${b.title}</h3>
                    <p style="color: rgba(255,255,255,0.6); line-height: 1.6;">${b.excerpt}</p>
                    <div style="margin-top: 20px; color: var(--primary); font-weight: 600;">
                        Read More <i class="fas fa-arrow-right" style="margin-left: 5px;"></i>
                    </div>
                </div>
            `).join('');

            // Admin lists
            renderAdminLists(data);
            
            // Animate elements
            animateElements();
        }

        function renderAdminLists(data) {
            // Social
            document.getElementById('adminSocialList').innerHTML = data.social.map(s => `
                <li>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <i class="${s.icon}" style="color: ${s.color}; font-size: 1.5rem;"></i>
                        <div>
                            <div style="font-weight: 600;">${s.name}</div>
                            <div style="font-size: 0.85rem; color: rgba(255,255,255,0.5);">${s.url}</div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn-small btn-edit" onclick="editItem('social', '${s.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-small btn-delete" onclick="deleteItem('social', '${s.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </li>
            `).join('');

            // Products
            document.getElementById('adminProductList').innerHTML = data.products.map(p => `
                <li>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <img src="${p.image}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 10px;">
                        <div>
                            <div style="font-weight: 600;">${p.title}</div>
                            <div style="font-size: 0.85rem; color: var(--accent);">₹${p.price}</div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn-small btn-edit" onclick="editItem('product', '${p.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-small btn-delete" onclick="deleteItem('product', '${p.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </li>
            `).join('');

            // Blogs
            document.getElementById('adminBlogList').innerHTML = data.blogs.map(b => `
                <li>
                    <div>
                        <div style="font-weight: 600;">${b.title}</div>
                        <div style="font-size: 0.85rem; color: rgba(255,255,255,0.5);">${new Date(b.date).toLocaleDateString()}</div>
                    </div>
                    <div class="item-actions">
                        <button class="btn-small btn-edit" onclick="editItem('blog', '${b.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-small btn-delete" onclick="deleteItem('blog', '${b.id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </li>
            `).join('');
        }

        // Typing Animation
        function typeWriter(text, elementId, speed = 50) {
            const element = document.getElementById(elementId);
            element.textContent = '';
            let i = 0;
            
            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // Character Animation for Title
        function initAnimations() {
            const title = document.getElementById('heroTitle');
            const text = title.textContent;
            title.innerHTML = '';
            
            text.split('').forEach((char, i) => {
                const span = document.createElement('span');
                span.className = 'char';
                span.textContent = char === ' ' ? '\u00A0' : char;
                span.style.animationDelay = `${i * 0.05}s`;
                title.appendChild(span);
            });

            // Animate characters
            gsap.to('.char', {
                opacity: 1,
                y: 0,
                duration: 0.8,
                stagger: 0.05,
                ease: "back.out(1.7)",
                delay: 0.5
            });
        }

        // Custom Cursor
        function initCursor() {
            const cursor = document.querySelector('.cursor');
            const follower = document.querySelector('.cursor-follower');
            
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
                
                setTimeout(() => {
                    follower.style.left = e.clientX - 10 + 'px';
                    follower.style.top = e.clientY - 10 + 'px';
                }, 100);
            });

            document.querySelectorAll('a, button').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.style.transform = 'scale(2)';
                    follower.style.transform = 'scale(1.5)';
                });
                el.addEventListener('mouseleave', () => {
                    cursor.style.transform = 'scale(1)';
                    follower.style.transform = 'scale(1)';
                });
            });
        }

        // Background Animation
        function initBackground() {
            const canvas = document.getElementById('bgCanvas');
            const ctx = canvas.getContext('2d');
            
            function resize() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resize();
            window.addEventListener('resize', resize);

            const particles = [];
            for (let i = 0; i < 50; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    size: Math.random() * 2
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                    
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(0, 243, 255, 0.5)';
                    ctx.fill();
                });
                
                requestAnimationFrame(animate);
            }
            animate();
        }

        // Animate Elements on Scroll
        function animateElements() {
            gsap.registerPlugin(ScrollTrigger);
            
            gsap.utils.toArray('.social-card, .product-card, .blog-card').forEach((el, i) => {
                gsap.from(el, {
                    scrollTrigger: {
                        trigger: el,
                        start: "top 85%",
                    },
                    y: 50,
                    opacity: 0,
                    duration: 0.6,
                    delay: i * 0.1
                });
            });
        }

        // Auth Functions
        function openAuth(mode) {
            authMode = mode;
            document.getElementById('authTitle').textContent = mode === 'login' ? 'Welcome Back' : 'Create Account';
            document.getElementById('authSubmitBtn').innerHTML = mode === 'login' ? '<i class="fas fa-sign-in-alt"></i> Login' : '<i class="fas fa-user-plus"></i> Sign Up';
            document.getElementById('nameGroup').style.display = mode === 'login' ? 'none' : 'block';
            document.getElementById('authSwitchText').textContent = mode === 'login' ? "Don't have an account?" : "Already have an account?";
            document.getElementById('authSwitchLink').textContent = mode === 'login' ? 'Create one' : 'Login';
            document.getElementById('authModal').classList.add('active');
        }

        function toggleAuthMode() {
            openAuth(authMode === 'login' ? 'signup' : 'login');
        }

        async function handleAuth(e) {
            e.preventDefault();
            showLoading(true);
            
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            
            try {
                if (authMode === 'login') {
                    await auth.signInWithEmailAndPassword(email, password);
                    showToast('Welcome back, Admin!' , false, 5000);
                } else {
                    const name = document.getElementById('authName').value;
                    const result = await auth.createUserWithEmailAndPassword(email, password);
                    await result.user.updateProfile({ displayName: name });
                    showToast('Account created successfully!');
                }
                closeModal('authModal');
            } catch (err) {
                showToast(err.message, true);
            }
            showLoading(false);
        }

        async function googleAuth() {
            showLoading(true);
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                await auth.signInWithPopup(provider);
                showToast('Welcome!');
                closeModal('authModal');
            } catch (err) {
                showToast(err.message, true);
            }
            showLoading(false);
        }

        function logout() {
            auth.signOut();
            showToast('Logged out successfully');
        }

        function updateUI() {
            if (currentUser) {
                document.getElementById('authButtons').style.display = 'none';
                document.getElementById('userInfo').classList.add('active');
                document.getElementById('userName').textContent = currentUser.displayName || currentUser.email;
                document.getElementById('userAvatar').src = currentUser.photoURL || 'https://ui-avatars.com/api/?name=' + encodeURIComponent(currentUser.displayName || 'User') + '&background=00f3ff&color=000';
                
                if (isAdmin) {
                    document.getElementById('userName').innerHTML += ' <span style="color: var(--accent); font-size: 0.7rem; background: rgba(0,255,136,0.2); padding: 2px 8px; border-radius: 10px;">ADMIN</span>';
                }
            } else {
                document.getElementById('authButtons').style.display = 'flex';
                document.getElementById('userInfo').classList.remove('active');
                closeAdmin();
            }
        }

        // Profile Edit
        function openProfileEdit() {
            if (!isAdmin) {
                showToast('Admin access required', true);
                return;
            }
            document.getElementById('profileEditModal').classList.add('active');
        }

        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (file) {
                tempImageFile = file;
                const reader = new FileReader();
                reader.onload = e => {
                    const preview = document.getElementById('profilePreview');
                    preview.src = e.target.result;
                    preview.classList.add('active');
                };
                reader.readAsDataURL(file);
            }
        }

        async function saveProfileChanges() {
            const name = document.getElementById('editProfileName').value;
            const tagline = document.getElementById('editProfileTagline').value;
            
            showLoading(true);
            try {
                let updateData = {
                    'profile.name': name,
                    'profile.tagline': tagline
                };
                
                if (tempImageFile) {
                    const storageRef = storage.ref('profile.jpg');
                    await storageRef.put(tempImageFile);
                    const url = await storageRef.getDownloadURL();
                    updateData['profile.image'] = url;
                    tempImageFile = null;
                }
                
                await db.collection('site').doc('data').update(updateData);
                showToast('Profile updated successfully!');
                closeModal('profileEditModal');
                loadData();
            } catch (err) {
                showToast(err.message, true);
            }
            showLoading(false);
        }

        // Admin Functions
        function toggleAdmin() {
            if (!isAdmin) {
                showToast('Admin access only', true);
                return;
            }
            document.getElementById('adminPanel').classList.toggle('active');
            loadData();
        }

        function closeAdmin() {
            document.getElementById('adminPanel').classList.remove('active');
        }

        function showAdminTab(tab, btn) {
            document.querySelectorAll('.admin-nav button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
            
            btn.classList.add('active');
            document.getElementById('admin-' + tab).classList.add('active');
        }

        function previewAdminImage(input) {
            const file = input.files[0];
            if (file) {
                tempImageFile = file;
                const reader = new FileReader();
                reader.onload = e => {
                    const preview = document.getElementById('adminProfilePreview');
                    preview.src = e.target.result;
                    preview.classList.add('active');
                };
                reader.readAsDataURL(file);
            }
        }

        async function updateAdminProfileImage() {
            if (!tempImageFile) return showToast('Select an image first', true);
            
            showLoading(true);
            try {
                const storageRef = storage.ref('profile.jpg');
                await storageRef.put(tempImageFile);
                const url = await storageRef.getDownloadURL();
                await db.collection('site').doc('data').update({ 'profile.image': url });
                tempImageFile = null;
                document.getElementById('adminProfilePreview').classList.remove('active');
                showToast('Profile image updated!');
                loadData();
            } catch (err) {
                showToast(err.message, true);
            }
            showLoading(false);
        }

        async function updateAdminProfileInfo() {
            const name = document.getElementById('adminProfileName').value;
            const tagline = document.getElementById('adminProfileTagline').value;
            
            showLoading(true);
            try {
                await db.collection('site').doc('data').update({
                    'profile.name': name,
                    'profile.tagline': tagline
                });
                showToast('Profile info updated!');
                loadData();
            } catch (err) {
                showToast(err.message, true);
            }
            showLoading(false);
        }

        // CRUD Operations
        function openAddEditModal(type, id = null) {
            currentEditType = type;
            currentEditId = id;
            
            const modal = document.getElementById('addEditModal');
            const title = document.getElementById('addEditTitle');
            const fields = document.getElementById('addEditFields');
            
            modal.classList.add('active');
            
            if (type === 'social') {
                title.textContent = id ? 'Edit Social Link' : 'Add Social Link';
                fields.innerHTML = `
                    <div class="form-group">
                        <label>Platform Name</label>
                        <input type="text" id="fieldName" placeholder="Instagram" required>
                    </div>
                    <div class="form-group">
                        <label>Platform Type</label>
                        <select id="fieldPlatform" style="width: 100%; padding: 15px; background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; color: white;">
                            <option value="instagram">Instagram</option>
                            <option value="twitter">Twitter</option>
                            <option value="linkedin">LinkedIn</option>
                            <option value="github">GitHub</option>
                            <option value="youtube">YouTube</option>
                            <option value="facebook">Facebook</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Profile URL</label>
                        <input type="url" id="fieldUrl" placeholder="https://..." required>
                    </div>
                `;
            } else if (type === 'product') {
                title.textContent = id ? 'Edit Product' : 'Add Product';
                fields.innerHTML = `
                    <div class="form-group">
                        <label>Product Title</label>
                        <input type="text" id="fieldTitle" placeholder="Course Name" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="fieldDesc" rows="3" placeholder="Product description..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Price (₹)</label>
                        <input type="number" id="fieldPrice" placeholder="1999" required>
                    </div>
                    <div class="form-group">
                        <label>Image URL</label>
                        <input type="url" id="fieldImage" placeholder="https://..." required>
                    </div>
                    <div class="form-group">
                        <label>Download Link</label>
                        <input type="url" id="fieldDownload" placeholder="https://..." required>
                    </div>
                `;
            } else if (type === 'blog') {
                title.textContent = id ? 'Edit Blog Post' : 'Add Blog Post';
                fields.innerHTML = `
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="fieldBlogTitle" placeholder="Blog Title" required>
                    </div>
                    <div class="form-group">
                        <label>Excerpt</label>
                        <textarea id="fieldExcerpt" rows="2" placeholder="Short description..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Content</label>
                        <textarea id="fieldContent" rows="5" placeholder="Full content..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="fieldDate" required>
                    </div>
                    <div class="form-group">
                        <label>Read Time</label>
                        <input type="text" id="fieldReadTime" placeholder="5 min read" required>
                    </div>
                `;
            }
            
            // Fill data if editing
            if (id) fillEditData(type, id);
        }

        async function fillEditData(type, id) {
            const doc = await db.collection('site').doc('data').get();
            const data = doc.data();
            const item = data[type + 's'].find(i => i.id === id);
            
            if (type === 'social') {
                document.getElementById('fieldName').value = item.name;
                document.getElementById('fieldPlatform').value = item.platform;
                document.getElementById('fieldUrl').value = item.url;
            } else if (type === 'product') {
                document.getElementById('fieldTitle').value = item.title;
                document.getElementById('fieldDesc').value = item.description;
                document.getElementById('fieldPrice').value = item.price;
                document.getElementById('fieldImage').value = item.image;
                document.getElementById('fieldDownload').value = item.downloadLink || '';
            } else if (type === 'blog') {
                document.getElementById('fieldBlogTitle').value = item.title;
                document.getElementById('fieldExcerpt').value = item.excerpt;
                document.getElementById('fieldContent').value = item.content;
                document.getElementById('fieldDate').value = item.date;
                document.getElementById('fieldReadTime').value = item.readTime;
            }
        }

        async function saveAddEdit(e) {
            e.preventDefault();
            showLoading(true);
            
            try {
                const doc = await db.collection('site').doc('data').get();
                const data = doc.data();
                let item = { id: currentEditId || Date.now().toString() };
                
                if (currentEditType === 'social') {
                    const platform = document.getElementById('fieldPlatform').value;
                    const icons = {
                        instagram: 'fab fa-instagram',
                        twitter: 'fab fa-twitter',
                        linkedin: 'fab fa-linkedin',
                        github: 'fab fa-github',
                        youtube: 'fab fa-youtube',
                        facebook: 'fab fa-facebook'
                    };
                    const colors = {
                        instagram: '#E1306C',
                        twitter: '#1DA1F2',
                        linkedin: '#0077B5',
                        github: '#6e5494',
                        youtube: '#FF0000',
                        facebook: '#4267B2'
                    };
                    
                    item = {
                        ...item,
                        name: document.getElementById('fieldName').value,
                        platform: platform,
                        url: document.getElementById('fieldUrl').value,
                        icon: icons[platform],
                        color: colors[platform]
                    };
                } else if (currentEditType === 'product') {
                    item = {
                        ...item,
                        title: document.getElementById('fieldTitle').value,
                        description: document.getElementById('fieldDesc').value,
                        price: parseInt(document.getElementById('fieldPrice').value),
                        image: document.getElementById('fieldImage').value,
                        downloadLink: document.getElementById('fieldDownload').value,
                        fileType: "Digital Download"
                    };
                } else if (currentEditType === 'blog') {
                    item = {
                        ...item,
                        title: document.getElementById('fieldBlogTitle').value,
                        excerpt: document.getElementById('fieldExcerpt').value,
                        content: document.getElementById('fieldContent').value,
                        date: document.getElementById('fieldDate').value,
                        readTime: document.getElementById('fieldReadTime').value
                    };
                }
                
                const arr = data[currentEditType + 's'];
                if (currentEditId) {
                    const idx = arr.findIndex(i => i.id === currentEditId);
                    arr[idx] = item;
                } else {
                    arr.push(item);
                }
                
                await db.collection('site').doc('data').update({ [currentEditType + 's']: arr });
                closeModal('addEditModal');
                showToast(currentEditId ? 'Updated successfully!' : 'Added successfully!');
                loadData();
            } catch (err) {
                showToast(err.message, true);
            }
            showLoading(false);
        }

        async function editItem(type, id) {
            openAddEditModal(type, id);
        }

        async function deleteItem(type, id) {
            if (!confirm('Are you sure you want to delete this item?')) return;
            
            showLoading(true);
            try {
                const doc = await db.collection('site').doc('data').get();
                const data = doc.data();
                const arr = data[type + 's'].filter(i => i.id !== id);
                await db.collection('site').doc('data').update({ [type + 's']: arr });
                showToast('Deleted successfully!');
                loadData();
            } catch (err) {
                showToast(err.message, true);
            }
            showLoading(false);
        }

        // Payment Functions
        async function initiatePayment(productId) {
            if (!currentUser) {
                showToast('Please login to purchase', true);
                openAuth('login');
                return;
            }
            
            const doc = await db.collection('site').doc('data').get();
            const data = doc.data();
            currentProduct = data.products.find(p => p.id === productId);
            
            if (!currentProduct) return;
            
            // Option 1: Razorpay Live (if configured properly)
            // Option 2: Manual payment capture
            const options = {
                key: "rzp_live_SEGuGj5eSI4ElC",
                amount: currentProduct.price * 100,
                currency: "INR",
                name: "Lawkush Kumar",
                description: currentProduct.title,
                image: "https://your-logo.png",
                handler: function(response) {
                    showPaymentSuccess(response.razorpay_payment_id);
                },
                prefill: {
                    name: currentUser.displayName || "",
                    email: currentUser.email || "",
                    contact: ""
                },
                theme: { color: "#00f3ff" },
                modal: {
                    ondismiss: function() {
                        // Offer manual payment if Razorpay fails
                        offerManualPayment();
                    }
                }
            };
            
            try {
                const rzp = new Razorpay(options);
                rzp.open();
                
                rzp.on('payment.failed', function(response) {
                    offerManualPayment();
                });
            } catch (e) {
                offerManualPayment();
            }
        }

        function offerManualPayment() {
            if (confirm('Automatic payment failed. Would you like to pay via UPI/Google Pay directly?\n\nAmount: ₹' + currentProduct.price + '\n\nClick OK for payment instructions.')) {
                // Show manual payment instructions
                const upiId = "your-upi@upi"; // Replace with your UPI
                const message = `Please pay ₹${currentProduct.price} to UPI: ${upiId}\n\nAfter payment, send screenshot to lawkusd660@gmail.com\n\nProduct: ${currentProduct.title}`;
                alert(message);
                
                // For demo, simulate success
                if (confirm('Have you completed the payment?')) {
                    showPaymentSuccess('MANUAL-' + Date.now());
                }
            }
        }

        function showPaymentSuccess(paymentId) {
            const modal = document.getElementById('paymentSuccessModal');
            const details = document.getElementById('paymentDetails');
            
            details.innerHTML = `
                <div style="margin-bottom: 15px;"><strong>Product:</strong> ${currentProduct.title}</div>
                <div style="margin-bottom: 15px;"><strong>Amount:</strong> ₹${currentProduct.price}</div>
                <div style="margin-bottom: 15px;"><strong>Payment ID:</strong> ${paymentId}</div>
                <div style="color: var(--accent);"><i class="fas fa-envelope"></i> Download link will be emailed to you</div>
            `;
            
            modal.classList.add('active');
            
            // Send email with download link (in production)
            sendPurchaseEmail(paymentId);
        }

        function downloadProduct() {
            if (currentProduct && currentProduct.downloadLink) {
                window.open(currentProduct.downloadLink, '_blank');
                closeModal('paymentSuccessModal');
                showToast('Download started!');
            }
        }

        function sendPurchaseEmail(paymentId) {
            // In production, this would call your backend
            console.log('Purchase email sent for:', paymentId);
        }

        // Blog Detail
        function openBlogDetail(id) {
            // Implement blog detail view
            showToast('Blog detail view coming soon!');
        }

        // Utilities
        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function showLoading(show) {
            document.getElementById('loadingScreen').classList.toggle('active', show);
        }

        function showToast(msg, error = false) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = 'toast ' + (error ? 'error' : '') + ' show';
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Close modals on outside click
        window.onclick = function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        };

        // 3D Tilt Effect for Profile
        const profile3d = document.getElementById('profile3d');
        if (profile3d) {
            profile3d.addEventListener('mousemove', (e) => {
                const card = profile3d.querySelector('.profile-card-3d');
                const rect = profile3d.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateX = (y - centerY) / 20;
                const rotateY = (centerX - x) / 20;
                
                card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
            });
            
            profile3d.addEventListener('mouseleave', () => {
                const card = profile3d.querySelector('.profile-card-3d');
                card.style.transform = 'rotateX(0) rotateY(0)';
            });
        }
    </script>
</body>
</html>
