<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User + Admin Login System</title>

  <style>
    body {
      margin: 0;
      background: black;
      font-family: Arial;
      color: white;
      text-align: center;
    }

    .neon-box {
      width: 420px;
      margin: 60px auto;
      padding: 35px;
      border-radius: 20px;
      border: 2px solid cyan;
      box-shadow: 0 0 25px cyan;
      background: rgba(0,0,0,0.9);
    }

    h2 {
      text-shadow: 0 0 12px cyan;
      margin-bottom: 20px;
    }

    input {
      width: 90%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 12px;
      border: none;
      outline: none;
      font-size: 15px;
    }

    button {
      padding: 12px 18px;
      margin: 10px 5px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    button:hover {
      box-shadow: 0 0 15px cyan;
      transform: scale(1.05);
    }

    .btn-main {
      background: cyan;
      color: black;
    }

    .btn-google {
      background: white;
      width: 90%;
      margin-top: 15px;
    }

    #adminPanel {
      display: none;
      margin-top: 30px;
    }

    #status {
      margin-top: 15px;
      color: lime;
      font-weight: bold;
    }

    #error {
      margin-top: 10px;
      color: red;
      font-weight: bold;
    }
  </style>
</head>

<body>

  <!-- LOGIN BOX -->
  <div class="neon-box">
    <h2>üë§ User Login</h2>

    <input id="email" placeholder="Enter Email">
    <input id="password" type="password" placeholder="Enter Password">

    <button class="btn-main" onclick="loginUser()">Login</button>
    <button class="btn-main" onclick="signupUser()">Signup</button>

    <button class="btn-google" onclick="googleLogin()">
      Login with Google
    </button>

    <p id="status"></p>
    <p id="error"></p>

    <button onclick="logoutUser()">Logout</button>
  </div>

  <!-- ADMIN PANEL -->
  <div class="neon-box" id="adminPanel">
    <h2>üîê Admin Dashboard</h2>

    <input id="editName" placeholder="Update Name">
    <input id="editTag" placeholder="Update Tagline">

    <button class="btn-main" onclick="saveProfile()">
      Save Profile
    </button>
  </div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";

  import {
    getAuth,
    GoogleAuthProvider,
    signInWithPopup,
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword,
    signOut,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  import {
    getFirestore,
    doc,
    setDoc
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // ‚úÖ Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyBgjSRBDfaL0FAb7_Tjb3vKpBw1qqevDyw",
    authDomain: "lawkush-portfolio.firebaseapp.com",
    projectId: "lawkush-portfolio",
    storageBucket: "lawkush-portfolio.firebasestorage.app",
    messagingSenderId: "682826833656",
    appId: "1:682826833656:web:c500f3637e88cf0e89e50d"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // ‚úÖ Admin Email Detect
  const ADMIN_EMAIL = "lawkusd660@gmail.com";

  // Show Messages
  function showMsg(msg) {
    document.getElementById("status").innerText = msg;
    document.getElementById("error").innerText = "";
  }

  function showError(msg) {
    document.getElementById("error").innerText = msg;
    document.getElementById("status").innerText = "";
  }

  // Auto Detect Admin/User
  onAuthStateChanged(auth, (user) => {
    if (user) {
      if (user.email === ADMIN_EMAIL) {
        document.getElementById("adminPanel").style.display = "block";
        showMsg("üî• Admin Logged In Successfully!");
      } else {
        document.getElementById("adminPanel").style.display = "none";
        showMsg("‚úÖ User Logged In Successfully!");
      }
    } else {
      document.getElementById("adminPanel").style.display = "none";
    }
  });

  // LOGIN
  window.loginUser = async function () {
    try {
      const email = document.getElementById("email").value;
      const pass = document.getElementById("password").value;

      await signInWithEmailAndPassword(auth, email, pass);
      showMsg("‚úÖ Login Successful!");
    } catch (err) {
      showError("‚ùå Login Failed: " + err.message);
    }
  };

  // SIGNUP
  window.signupUser = async function () {
    try {
      const email = document.getElementById("email").value;
      const pass = document.getElementById("password").value;

      await createUserWithEmailAndPassword(auth, email, pass);
      showMsg("‚úÖ Signup Successful!");
    } catch (err) {
      showError("‚ùå Signup Failed: " + err.message);
    }
  };

  // GOOGLE LOGIN
  window.googleLogin = async function () {
    try {
      const provider = new GoogleAuthProvider();
      await signInWithPopup(auth, provider);
      showMsg("‚úÖ Google Login Successful!");
    } catch (err) {
      showError("‚ùå Google Login Failed: " + err.message);
    }
  };

  // LOGOUT
  window.logoutUser = async function () {
    await signOut(auth);
    showMsg("‚ùå Logged Out Successfully!");
  };

  // ADMIN SAVE PROFILE
  window.saveProfile = async function () {
    try {
      const name = document.getElementById("editName").value;
      const tag = document.getElementById("editTag").value;

      await setDoc(doc(db, "portfolio", "site"), {
        profile: { name, tagline: tag }
      });

      alert("‚úÖ Profile Updated Permanently!");
    } catch (err) {
      alert("‚ùå Error Saving: " + err.message);
    }
  };
</script>

</body>
</html>
